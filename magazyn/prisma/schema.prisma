// magazyn/server/prisma/schema.prisma
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}


generator client {
  provider = "prisma-client-js"
}

enum ProductStatus {
  NA_MAGAZYNIE
  ZAREZERWOWANY
  SPRZEDANY
}

model Product {
  id          String        @id @default(cuid())
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt
  title       String
  brand       String?
  size        String?
  condition   String?
  priceCents  Int
  dimA        Float?
  dimB        Float?
  dimC        Float?
  sku         String?       @unique
  status      ProductStatus @default(NA_MAGAZYNIE)
  notes       String?

  photos      Photo[]

  @@index([title])
  @@index([brand])
  @@index([size])
  @@index([sku])
}

model Photo {
  id         String   @id @default(cuid())
  createdAt  DateTime @default(now())

  url        String
  role       String
  width      Int?
  height     Int?
  sizeBytes  Int
  isFront    Boolean  @default(false)
  order      Int      @default(0)

  productId  String
  product    Product  @relation(fields: [productId], references: [id], onDelete: Cascade)

  @@index([productId, isFront])
}
